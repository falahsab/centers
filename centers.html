<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ù…Ø­Ø§ÙØ¸Ø© ÙˆØ§Ù„Ù…Ø¯ÙŠÙ†Ø© ÙˆØ§Ù„Ù…Ø±Ø§ÙƒØ²</title>
<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600&display=swap" rel="stylesheet">
<style>
body { font-family:"Cairo",sans-serif; background:#e6f2f8; direction:rtl; margin:0; padding:20px; }
.container { max-width:650px; margin:auto; background:#fff; padding:25px 20px 40px 20px; border-radius:15px; box-shadow:0 6px 15px rgba(0,0,0,0.1);}
h2 { color:#0d4d6b; font-weight:600; font-size:24px; margin-bottom:25px; }
select { width:100%; padding:14px; margin:12px 0; font-size:16px; border-radius:10px; border:1px solid #a0c4d8; background:#f0f8ff; transition:all 0.3s; }
select:focus { border-color:#0d4d6b; box-shadow:0 0 8px rgba(13,77,107,0.2); outline:none; }
#centersList { margin-top:25px; }
.center-item {
  display: flex;
  flex-direction: row-reverse;
  align-items: center;
  background: #f0f8ff;
  border-radius: 10px;
  padding: 6px 10px;       /* Ø§Ù„Ø¨Ø·Ø§Ù‚Ø© Ø£ØµØºØ± */
  margin: 5px 0;
  font-size: 18px;          /* Ù†Øµ Ø§Ù„Ù…Ø±ÙƒØ² Ø£ÙƒØ¨Ø± */
  font-weight: 700;         /* Ø¨ÙˆÙ„Ø¯ */
  transition: transform 0.2s, box-shadow 0.2s;
}

.center-item .serial-box {
  width: 25px;              /* Ø£ØµØºØ± */
  height: 25px;             /* Ø£ØµØºØ± */
  font-size: 14px;          /* Ø®Ø· Ø§Ù„Ø±Ù‚Ù… Ø£ØµØºØ± */
  background: #0d4d6b;
  color: white;
  font-weight: 700;         /* Ø¨ÙˆÙ„Ø¯ */
  border-radius: 10px;
  display: flex;
  align-items: center;
  justify-content: center;
  margin-left: 10px;
  flex-shrink: 0;
}

@media(max-width:600px){
  .center-item {
    font-size: 16px;
    padding:5px 8px;
  }
  .center-item .serial-box{
    width:30px;
    height:30px;
    font-size:12px;
  }
}


.center-item:hover { transform:translateY(-2px); box-shadow:0 4px 10px rgba(0,0,0,0.1);}
.center-item .serial-box { width:50px; height:50px; background:#0d4d6b; color:white; font-weight:600; border-radius:10px; display:flex; align-items:center; justify-content:center; margin-left:15px; flex-shrink:0; font-size:16px;}
.center-item .center-name { flex-grow:1; word-break:break-word; }
@media(max-width:600px){ .container{padding:20px 15px 30px 15px;} select{font-size:15px;} .center-item{font-size:15px;} .center-item .serial-box{width:40px; height:40px; font-size:14px;} }
</style>
</head>
<body>

<div class="container">
<h4>ğŸ¥ Ø¹Ø±Ø¶ Ø§Ù„Ù…Ø±Ø§ÙƒØ² Ø§Ù„Ø·Ø¨ÙŠØ©</h4>
<select id="governorate"><option value="">Ø§Ø®ØªØ± Ø§Ù„Ù…Ø­Ø§ÙØ¸Ø©</option></select>
<select id="city" disabled><option value="">Ø§Ø®ØªØ± Ø§Ù„Ù…Ø¯ÙŠØ±ÙŠØ©</option></select>
<div id="centersList"></div>
</div>

<script>
const SHEET_ID = "1OZFj2TPLngq23Gr9p1AWrBxI_vh_LjZrwn1sOmps8Bo";
const SHEET_NAME = "Sheet1";
const URL = `https://docs.google.com/spreadsheets/d/${SHEET_ID}/gviz/tq?tqx=out:json&sheet=${SHEET_NAME}`;

fetch(URL)
.then(res => res.text())
.then(data => {
    const json = JSON.parse(data.substr(47).slice(0, -2));
    const rows = json.table.rows
        .map(r => [
            r.c[0]?.v?.toString().trim() || "",
            r.c[1]?.v?.toString().trim() || "",
            r.c[2]?.v?.toString().trim() || ""
        ])
        .filter(r => r.some(cell => cell !== "")); // ØªØ¬Ø§Ù‡Ù„ Ø§Ù„ØµÙÙˆÙ Ø§Ù„ÙØ§Ø±ØºØ©

    // Ø¥Ø²Ø§Ù„Ø© ØµÙ Ø§Ù„Ø¹Ù†Ø§ÙˆÙŠÙ† Ø¥Ø°Ø§ Ù…ÙˆØ¬ÙˆØ¯
    if(rows[0] && rows[0][0].toLowerCase() === "governorate") rows.shift();

    const dataList = rows.map(r=>({governorate:r[0], city:r[1], center:r[2]}));

    const govSelect = document.getElementById("governorate");
    const citySelect = document.getElementById("city");
    const centersDiv = document.getElementById("centersList");

    // ØªØ¹Ø¨Ø¦Ø© Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ø­Ø§ÙØ¸Ø§Øª Ø¨Ø¯ÙˆÙ† ØªÙƒØ±Ø§Ø±
    const governorates = [...new Set(dataList.map(d=>d.governorate))].sort();
    governorates.forEach(g=>{
        const opt = document.createElement("option");
        opt.value = g;
        opt.textContent = g;
        govSelect.appendChild(opt);
    });

    // Ø¹Ù†Ø¯ Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ù…Ø­Ø§ÙØ¸Ø©
    govSelect.addEventListener("change", ()=>{
        const selectedGov = govSelect.value;
        citySelect.innerHTML='<option value="">Ø§Ø®ØªØ± Ø§Ù„Ù…Ø¯ÙŠØ±ÙŠØ©</option>';
        centersDiv.innerHTML="";
        if(!selectedGov){ citySelect.disabled=true; return; }

        // Ø¬Ù„Ø¨ Ø§Ù„Ù…Ø¯Ù† Ø§Ù„ØªØ§Ø¨Ø¹Ø© Ù„Ù„Ù…Ø­Ø§ÙØ¸Ø© Ø¨Ø¯ÙˆÙ† ØªÙƒØ±Ø§Ø±
        const cities=[...new Set(dataList.filter(d=>d.governorate===selectedGov).map(d=>d.city))].sort();
        cities.forEach(c=>{
            const opt=document.createElement("option");
            opt.value=c;
            opt.textContent=c;
            citySelect.appendChild(opt);
        });
        citySelect.disabled=false;
    });

    // Ø¹Ù†Ø¯ Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©
    citySelect.addEventListener("change", ()=>{
        const selectedGov=govSelect.value;
        const selectedCity=citySelect.value;
        centersDiv.innerHTML="";
        if(!selectedCity) return;

        const centers=dataList
            .filter(d=>d.governorate===selectedGov && d.city===selectedCity)
            .map(d=>d.center)
            .filter(Boolean);

        if(centers.length===0){ centersDiv.innerHTML="<p>Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ø±Ø§ÙƒØ² Ù„Ù‡Ø°Ù‡ Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©.</p>"; return; }

        centers.forEach((c,index)=>{
            const div=document.createElement("div");
            div.className="center-item";

            const serialBox=document.createElement("div");
            serialBox.className="serial-box";
            serialBox.textContent=index+1;

            const nameDiv=document.createElement("div");
            nameDiv.className="center-name";
            nameDiv.textContent=c;

            div.appendChild(nameDiv);
            div.appendChild(serialBox);
            centersDiv.appendChild(div);
        });
    });

})
.catch(err=>console.error("Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª:", err));
</script>

</body>
</html>


